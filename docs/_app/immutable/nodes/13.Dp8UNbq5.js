import{s as L,n as j,c as O,o as Q,d as X,a as U}from"../chunks/scheduler.D9M2Mvwn.js";import{S as Z,i as x,y as I,g as p,d as u,e as v,s as S,t as y,c as C,a as M,f as E,b as A,k as G,n as _,h as w,w as J,j as P,r as $}from"../chunks/index.B9F1qqVi.js";import{e as D}from"../chunks/each.CyciAZEw.js";import{M as ee,P as te,e as se}from"../chunks/ranker.DHQ9i9Gg.js";import{s as H,i as le}from"../chunks/images_store.CRTMab6J.js";import{g as ae}from"../chunks/entry.BDEeqWEP.js";function K(o,t,r){const s=o.slice();return s[10]=t[r],s[12]=r,s}function re(o){let t,r,s,e=`You have made ${o[0]?o[0].getTotalComparisons():0} comparisons.`,l,a,i,d=`There are ${o[4].length} total images.`,g,b,k,h=`We recommend doing between ${o[4].length} and ${Math.round(o[4].length*Math.log2(o[4].length))} comparisons for accurate results.`,c,N,T,R="Finish ranking",F,W,m=o[3]&&V(o);return{c(){t=v("div"),m&&m.c(),r=S(),s=v("span"),l=y(e),a=S(),i=v("span"),g=y(d),b=S(),k=v("span"),c=y(h),N=S(),T=v("button"),T.textContent=R,this.h()},l(n){t=C(n,"DIV",{class:!0});var f=M(t);m&&m.l(f),f.forEach(u),r=E(n),s=C(n,"SPAN",{class:!0});var Y=M(s);l=A(Y,e),Y.forEach(u),a=E(n),i=C(n,"SPAN",{class:!0});var q=M(i);g=A(q,d),q.forEach(u),b=E(n),k=C(n,"SPAN",{class:!0});var B=M(k);c=A(B,h),B.forEach(u),N=E(n),T=C(n,"BUTTON",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-1u32632"&&(T.textContent=R),this.h()},h(){_(t,"class","grid grid-cols-2 gap-6 px-20"),_(s,"class","block"),_(i,"class","block"),_(k,"class","block"),_(T,"class","m-4 rounded-sm border border-black p-2")},m(n,f){p(n,t,f),m&&m.m(t,null),p(n,r,f),p(n,s,f),w(s,l),p(n,a,f),p(n,i,f),w(i,g),p(n,b,f),p(n,k,f),w(k,c),p(n,N,f),p(n,T,f),F||(W=J(T,"click",o[6]),F=!0)},p(n,f){n[3]?m?m.p(n,f):(m=V(n),m.c(),m.m(t,null)):m&&(m.d(1),m=null),f&1&&e!==(e=`You have made ${n[0]?n[0].getTotalComparisons():0} comparisons.`)&&P(l,e),f&16&&d!==(d=`There are ${n[4].length} total images.`)&&P(g,d),f&16&&h!==(h=`We recommend doing between ${n[4].length} and ${Math.round(n[4].length*Math.log2(n[4].length))} comparisons for accurate results.`)&&P(c,h)},d(n){n&&(u(t),u(r),u(s),u(a),u(i),u(b),u(k),u(N),u(T)),m&&m.d(),F=!1,W()}}}function ne(o){let t,r="Error: Not enough images to start comparing. Need at least 2.",s,e,l="Click here to go back and add images.";return{c(){t=v("p"),t.textContent=r,s=S(),e=v("a"),e.textContent=l,this.h()},l(a){t=C(a,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-148cj7w"&&(t.textContent=r),s=E(a),e=C(a,"A",{class:!0,href:!0,"data-svelte-h":!0}),G(e)!=="svelte-w9cmbm"&&(e.textContent=l),this.h()},h(){_(t,"class","text-red-500"),_(e,"class","text-blue-500 underline"),_(e,"href","./")},m(a,i){p(a,t,i),p(a,s,i),p(a,e,i)},p:j,d(a){a&&(u(t),u(s),u(e))}}}function V(o){let t,r=D(o[3]),s=[];for(let e=0;e<r.length;e+=1)s[e]=z(K(o,r,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=I()},l(e){for(let l=0;l<s.length;l+=1)s[l].l(e);t=I()},m(e,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,l);p(e,t,l)},p(e,l){if(l&45){r=D(e[3]);let a;for(a=0;a<r.length;a+=1){const i=K(e,r,a);s[a]?s[a].p(i,l):(s[a]=z(i),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(e){e&&u(t),$(s,e)}}}function z(o){let t,r,s,e,l,a=o[10].file.name+"",i,d,g,b;function k(){return o[7](o[12])}return{c(){t=v("button"),r=v("img"),e=S(),l=v("span"),i=y(a),d=S(),this.h()},l(h){t=C(h,"BUTTON",{class:!0});var c=M(t);r=C(c,"IMG",{class:!0,src:!0,alt:!0}),e=E(c),l=C(c,"SPAN",{class:!0});var N=M(l);i=A(N,a),N.forEach(u),d=E(c),c.forEach(u),this.h()},h(){_(r,"class","mx-auto object-cover"),U(r.src,s=o[10].url)||_(r,"src",s),_(r,"alt",""),_(l,"class","block overflow-hidden text-ellipsis whitespace-nowrap text-center"),_(t,"class","rounded-md border-2 border-black")},m(h,c){p(h,t,c),w(t,r),w(t,e),w(t,l),w(l,i),w(t,d),g||(b=J(t,"click",k),g=!0)},p(h,c){o=h,c&8&&!U(r.src,s=o[10].url)&&_(r,"src",s),c&8&&a!==(a=o[10].file.name+"")&&P(i,a)},d(h){h&&u(t),g=!1,b()}}}function oe(o){let t;function r(l,a){return l[1]?ne:re}let s=r(o),e=s(o);return{c(){e.c(),t=I()},l(l){e.l(l),t=I()},m(l,a){e.m(l,a),p(l,t,a)},p(l,[a]){s===(s=r(l))&&e?e.p(l,a):(e.d(1),e=s(l),e&&(e.c(),e.m(t.parentNode,t)))},i:j,o:j,d(l){l&&u(t),e.d(l)}}}function ie(o,t,r){let s,e;O(o,H,c=>r(8,s=c)),O(o,le,c=>r(4,e=c));let l;const a=se.bradleyTerry,i=ee.fewestComparisonsFirst;let d=!1,g=0,b;Q(()=>{e.length>=2?(r(0,l=new te(e)),r(3,b=l.currentlyCompared)):r(1,d=!0)});function k(){X(H,s=l.sortedElements(a),s),ae("./results")}return[l,d,g,b,e,i,k,c=>{l.handleWinner(c),r(3,b=l.newComparison(i)),r(2,g+=1),r(0,l)}]}class _e extends Z{constructor(t){super(),x(this,t,ie,oe,L,{})}}export{_e as component};
