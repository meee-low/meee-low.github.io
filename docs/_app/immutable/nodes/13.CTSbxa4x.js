import{s as q,n as E,r as F,c as C,o as G,e as L,f as O,t as z}from"../chunks/Bx6vS9cK.js";import{S as B,i as H,d as _,o as J,m as p,a as y,b as v,w as U,g as P,c as k,e as D,j as S,h as w,s as V,f as $,t as j}from"../chunks/pkgiTMN5.js";import{e as N}from"../chunks/DCkIQie_.js";import{g as K}from"../chunks/4NlW5MbD.js";import{i as A}from"../chunks/D1WTYpUD.js";function M(o,a,t){const l=o.slice();return l[5]=a[t],l[7]=t,l}function R(o){let a,t=`Loading... Loaded ${o[1].length} out of ${o[0]} images.`,l;return{c(){a=w("div"),l=j(t)},l(r){a=k(r,"DIV",{});var s=D(a);l=$(s,t),s.forEach(_)},m(r,s){y(r,a,s),v(a,l)},p(r,s){s&3&&t!==(t=`Loading... Loaded ${r[1].length} out of ${r[0]} images.`)&&V(l,t)},d(r){r&&_(a)}}}function T(o){let a,t,l,r,s,h=o[5].file.name+"",g,f;return{c(){a=w("div"),t=w("img"),r=S(),s=w("span"),g=j(h),f=S(),this.h()},l(m){a=k(m,"DIV",{class:!0});var d=D(a);t=k(d,"IMG",{class:!0,src:!0,alt:!0}),r=P(d),s=k(d,"SPAN",{class:!0});var i=D(s);g=$(i,h),i.forEach(_),f=P(d),d.forEach(_),this.h()},h(){p(t,"class","mx-auto max-h-[85%] max-w-full border object-contain"),L(t.src,l=o[5].url)||p(t,"src",l),p(t,"alt",`Uploaded image ${o[7]}`),p(s,"class","block overflow-hidden text-ellipsis whitespace-nowrap text-center"),p(a,"class","max-h-[33vh]")},m(m,d){y(m,a,d),v(a,t),v(a,r),v(a,s),v(s,g),v(a,f)},p(m,d){d&2&&!L(t.src,l=m[5].url)&&p(t,"src",l),d&2&&h!==(h=m[5].file.name+"")&&V(g,h)},d(m){m&&_(a)}}}function Q(o){let a,t,l,r,s,h,g,f,m,d,i=o[2]&&R(o),b=N(o[1]),c=[];for(let e=0;e<b.length;e+=1)c[e]=T(M(o,b,e));return{c(){i&&i.c(),a=S(),t=w("form"),l=w("input"),r=S(),s=w("input"),g=S(),f=w("div");for(let e=0;e<c.length;e+=1)c[e].c();this.h()},l(e){i&&i.l(e),a=P(e),t=k(e,"FORM",{});var n=D(t);l=k(n,"INPUT",{class:!0,type:!0,accept:!0}),r=P(n),s=k(n,"INPUT",{class:!0,type:!0}),n.forEach(_),g=P(e),f=k(e,"DIV",{class:!0});var u=D(f);for(let I=0;I<c.length;I+=1)c[I].l(u);u.forEach(_),this.h()},h(){p(l,"class","mb-4"),p(l,"type","file"),p(l,"accept","image/*"),l.multiple=!0,p(s,"class",h=(o[2]?"cursor-wait":"cursor-pointer")+" block rounded-sm border border-black p-2"),p(s,"type","submit"),s.disabled=o[2],p(f,"class","grid grid-cols-2 gap-4 md:grid-cols-5 lg:grid-cols-8")},m(e,n){i&&i.m(e,n),y(e,a,n),y(e,t,n),v(t,l),v(t,r),v(t,s),y(e,g,n),y(e,f,n);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(f,null);m||(d=[U(l,"change",o[3]),U(t,"submit",o[4])],m=!0)},p(e,[n]){if(e[2]?i?i.p(e,n):(i=R(e),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null),n&4&&h!==(h=(e[2]?"cursor-wait":"cursor-pointer")+" block rounded-sm border border-black p-2")&&p(s,"class",h),n&4&&(s.disabled=e[2]),n&2){b=N(e[1]);let u;for(u=0;u<b.length;u+=1){const I=M(e,b,u);c[u]?c[u].p(I,n):(c[u]=T(I),c[u].c(),c[u].m(f,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=b.length}},i:E,o:E,d(e){e&&(_(a),_(t),_(g),_(f)),i&&i.d(e),J(c,e),m=!1,F(d)}}}function W(o,a,t){let l,r;C(o,A,f=>t(1,r=f));let s=0;G(()=>{t(0,s=r.length)});async function h(f){const m=f.currentTarget;if(!m.files)return;const d=Array.from(m.files);t(0,s+=d.length);const i=d.map(b=>{new Promise(c=>{const e=new FileReader;e.onload=n=>{n.target&&n.target.result&&typeof n.target.result=="string"?(O(A,r=[...r,{url:n.target.result,file:b}],r),z().then(c)):c()},e.readAsDataURL(b)})});await Promise.all(i)}function g(f){f.preventDefault();const m=window.location.pathname;K(`${m}/rank`)}return o.$$.update=()=>{o.$$.dirty&3&&t(2,l=r.length!==s)},[s,r,l,h,g]}class te extends B{constructor(a){super(),H(this,a,W,Q,q,{})}}export{te as component};
