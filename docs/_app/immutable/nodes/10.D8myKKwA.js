import{s as j,n as G,c as J,r as V}from"../chunks/scheduler.iXXlly_q.js";import{S as q,i as X,s as A,e as v,t as E,f as U,c as k,a as N,b as S,d as p,g as T,h as g,j as O,k as z,n as y,w as P,r as H,y as D}from"../chunks/index.Bp-h_JH8.js";import{e as F}from"../chunks/each.BN2WdNfM.js";import{s as Q}from"../chunks/stores.Bf6lG0QP.js";function W(l,e){console.assert(l.length>0);let t=l.map(n=>1/(1+10**((n-e)/400)));const r=t.reduce((n,a)=>n+a,0);return console.log("inside expectedScore function:",{oppositionRatings:l,ownRating:e,expScores:t,expScore:r}),r}function Y(l,e,t,r=.001){let n=(l+e)/2;for(;e-l>r;)n=(l+e)/2,console.log("Logging x:",{x:n,"f(x)":t(n)}),t(n)<0?l=n:e=n;return Math.round(n)}function Z(l,e){const t=r=>W(l,r)-e;return console.log("hmmm: ",{opponentsRatings:l,actualScore:e,"expectedScore with 2000":W(l,2e3)}),Y(0,4e3,t)}function x(l,e=[],t=10){if(l.length!==e.length&&(e.length!==0&&console.warn("Scores and ratings should be the same length. Falling back to default."),e=Array(l.length).fill(2e3)),l.length<2)return l;let r=[...e];for(let n=0;n<t;++n)for(let a=0;a<r.length;++a){const s=r.toSpliced(a,1);r[a]=Z(s,l[a])}return r}function K(l,e,t){const r=l.slice();return r[15]=e[t],r[17]=t,r}function $(l){let e,t=`Error: Unreachable. If you see this in the live website, please report it as
    a bug.`;return{c(){e=v("div"),e.textContent=t},l(r){e=k(r,"DIV",{"data-svelte-h":!0}),z(e)!=="svelte-iew4fe"&&(e.textContent=t)},m(r,n){T(r,e,n)},p:G,d(r){r&&p(e)}}}function ee(l){let e,t,r=l[2][l[4][0]]+"",n,a,s,_=l[2][l[4][1]]+"",d,u,o,i,b,I,w=F(l[2]),m=[];for(let c=0;c<w.length;c+=1)m[c]=R(K(l,w,c));return{c(){e=v("div"),t=v("button"),n=E(r),a=A(),s=v("button"),d=E(_),u=A(),o=v("div"),i=v("ul");for(let c=0;c<m.length;c+=1)m[c].c();this.h()},l(c){e=k(c,"DIV",{});var f=N(e);t=k(f,"BUTTON",{class:!0});var h=N(t);n=S(h,r),h.forEach(p),a=U(f),s=k(f,"BUTTON",{class:!0});var L=N(s);d=S(L,_),L.forEach(p),f.forEach(p),u=U(c),o=k(c,"DIV",{});var M=N(o);i=k(M,"UL",{});var C=N(i);for(let B=0;B<m.length;B+=1)m[B].l(C);C.forEach(p),M.forEach(p),this.h()},h(){y(t,"class","border p-2"),y(s,"class","border p-2")},m(c,f){T(c,e,f),g(e,t),g(t,n),g(e,a),g(e,s),g(s,d),T(c,u,f),T(c,o,f),g(o,i);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(i,null);b||(I=[P(t,"click",l[11]),P(s,"click",l[12])],b=!0)},p(c,f){if(f&20&&r!==(r=c[2][c[4][0]]+"")&&O(n,r),f&20&&_!==(_=c[2][c[4][1]]+"")&&O(d,_),f&36){w=F(c[2]);let h;for(h=0;h<w.length;h+=1){const L=K(c,w,h);m[h]?m[h].p(L,f):(m[h]=R(L),m[h].c(),m[h].m(i,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=w.length}},d(c){c&&(p(e),p(u),p(o)),H(m,c),b=!1,V(I)}}}function te(l){let e,t,r,n,a,s,_=l[6].interactive.ranker.sendButtonText+"",d,u,o;return{c(){e=v("form"),t=A(),r=v("label"),n=v("textarea"),a=A(),s=v("button"),d=E(_),this.h()},l(i){e=k(i,"FORM",{});var b=N(e);t=U(b),r=k(b,"LABEL",{});var I=N(r);n=k(I,"TEXTAREA",{rows:!0,cols:!0,class:!0}),N(n).forEach(p),I.forEach(p),a=U(b),s=k(b,"BUTTON",{class:!0});var w=N(s);d=S(w,_),w.forEach(p),b.forEach(p),this.h()},h(){y(n,"rows","5"),y(n,"cols","40"),y(n,"class","border"),y(s,"class","block rounded-md border p-2")},m(i,b){T(i,e,b),g(e,t),g(e,r),g(r,n),D(n,l[1]),g(e,a),g(e,s),g(s,d),u||(o=[P(n,"input",l[10]),P(s,"click",l[8])],u=!0)},p(i,b){b&2&&D(n,i[1]),b&64&&_!==(_=i[6].interactive.ranker.sendButtonText+"")&&O(d,_)},d(i){i&&p(e),u=!1,V(o)}}}function R(l){let e,t=`${l[15]}: ${l[5][l[17]]}`,r,n;return{c(){e=v("li"),r=E(t),n=A()},l(a){e=k(a,"LI",{});var s=N(e);r=S(s,t),n=U(s),s.forEach(p)},m(a,s){T(a,e,s),g(e,r),g(e,n)},p(a,s){s&36&&t!==(t=`${a[15]}: ${a[5][a[17]]}`)&&O(r,t)},d(a){a&&p(e)}}}function le(l){let e,t,r,n=JSON.stringify({words:l[2],wordScores:l[0],wordRankings:l[5]},null,2)+"",a,s;function _(o,i){return o[3]===o[7].INPUTTING?te:o[3]===o[7].RANKING?ee:$}let d=_(l),u=d(l);return{c(){u.c(),e=A(),t=v("pre"),r=E("  "),a=E(n),s=E(`
`)},l(o){u.l(o),e=U(o),t=k(o,"PRE",{});var i=N(t);r=S(i,"  "),a=S(i,n),s=S(i,`
`),i.forEach(p)},m(o,i){u.m(o,i),T(o,e,i),T(o,t,i),g(t,r),g(t,a),g(t,s)},p(o,[i]){d===(d=_(o))&&u?u.p(o,i):(u.d(1),u=d(o),u&&(u.c(),u.m(e.parentNode,e))),i&37&&n!==(n=JSON.stringify({words:o[2],wordScores:o[0],wordRankings:o[5]},null,2)+"")&&O(a,n)},i:G,o:G,d(o){o&&(p(e),p(t)),u.d(o)}}}function re(l){const e=Math.floor(Math.random()*l);let t;do t=Math.floor(Math.random()*l);while(t===e);return[e,t]}function ne(l,e,t){let r,n;J(l,Q,f=>t(6,n=f));var a=(f=>(f[f.INPUTTING=0]="INPUTTING",f[f.RANKING=1]="RANKING",f))(a||{});let s,_=[],d=[],u=0,o;function i(){t(2,_=s.split(",")),t(0,d=Array(_.length).fill(1)),t(0,d),b(),t(3,u=1)}function b(){t(4,o=re(_.length))}function I(f){const h=o[f];t(0,d[h]++,d),t(0,d),b()}function w(){s=this.value,t(1,s)}const m=()=>I(0),c=()=>I(1);return l.$$.update=()=>{l.$$.dirty&1&&t(5,r=x(d))},[d,s,_,u,o,r,n,a,i,I,w,m,c]}class ce extends q{constructor(e){super(),X(this,e,ne,le,j,{})}}export{ce as component};
