import{n as q,p as z}from"./index.KCDMxWQV.js";import{r as B}from"./scheduler.BNGhfCF4.js";function H(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function C(e,i){e.d(1),i.delete(e.key)}function D(e,i){z(e,1,1,()=>{i.delete(e.key)})}function I(e,i){e.f(),C(e,i)}function J(e,i){e.f(),D(e,i)}function K(e,i,v,E,S,_,o,k,p,A,l,j){let d=e.length,c=_.length,f=d;const u={};for(;f--;)u[e[f].key]=f;const h=[],w=new Map,y=new Map,g=[];for(f=c;f--;){const n=j(S,_,f),s=v(n);let t=o.get(s);t?g.push(()=>t.p(n,i)):(t=A(s,n),t.c()),w.set(s,h[f]=t),s in u&&y.set(s,Math.abs(f-u[s]))}const x=new Set,M=new Set;function m(n){q(n,1),n.m(k,l),o.set(n.key,n),l=n.first,c--}for(;d&&c;){const n=h[c-1],s=e[d-1],t=n.key,a=s.key;n===s?(l=n.first,d--,c--):w.has(a)?!o.has(t)||x.has(t)?m(n):M.has(a)?d--:y.get(t)>y.get(a)?(M.add(t),m(n)):(x.add(a),d--):(p(s,o),d--)}for(;d--;){const n=e[d];w.has(n.key)||p(n,o)}for(;c;)m(h[c-1]);return B(g),h}export{J as a,H as e,I as f,K as u};
